<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Spanish Exercise — Present / Pretérito Perfecto / Indefinido</title>

<style>
  :root{
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  }
  body{ margin:0; background:#fafafa; color:#111; }
  .wrap{ max-width: 980px; margin: 0 auto; padding: 14px; }
  .card{
    background:#fff; border:1px solid #eaeaea; border-radius: 16px;
    padding: 16px; margin: 14px 0;
    box-shadow: 0 1px 4px rgba(0,0,0,0.05);
  }
  h1{ margin:0 0 8px; font-size: 24px; line-height: 1.2; }
  h2{ margin:0 0 10px; font-size: 20px; line-height: 1.2; }
  .sub{ color:#444; font-size: 15px; line-height: 1.35; }
  .note{ color:#555; font-size: 14px; line-height: 1.45; margin-top: 8px; }
  .hint{ font-size: 13px; color:#666; }

  /* Controls */
  .controls{ display:flex; flex-direction: column; gap: 12px; margin-top: 12px; }
  .controlRow{ display:grid; gap:8px; }
  label{ font-size: 14px; font-weight: 800; color:#222; }
  select, input[type="range"]{
    width:100%;
    font-size:16px;
    padding: 10px;
    border-radius: 12px;
    border:1px solid #ddd;
    background:#fff;
  }

  .btn{
    width:100%;
    font-size: 16px;
    padding: 14px 14px;
    border-radius: 14px;
    border:1px solid #111;
    background:#111;
    color:#fff;
    font-weight: 800;
    cursor:pointer;
  }
  .btn.secondary{
    border:1px solid #ddd;
    background:#fff;
    color:#111;
    font-weight: 800;
  }

  /* Items */
  .item{
    border: 1px solid #eee;
    background:#fcfcfc;
    border-radius: 14px;
    padding: 14px;
    margin-top: 12px;
  }
  .sp{ font-size: 20px; font-weight: 900; line-height: 1.35; }
  .en{ font-size: 15px; color:#444; line-height: 1.35; margin-top: 6px; }
  .tag{
    display:inline-block;
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 999px;
    border:1px solid #e9e9e9;
    background:#fff;
    color:#555;
    margin-top: 10px;
  }
  .tools{ display:flex; flex-direction: column; gap:10px; margin-top: 12px; }

  .grid{
    display:grid;
    gap: 12px;
    grid-template-columns: 1fr;
    margin-top: 12px;
  }

  @media (min-width: 860px){
    .wrap{ padding: 18px; }
    h1{ font-size: 28px; }
    h2{ font-size: 22px; }
    .sp{ font-size: 22px; }

    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
      align-items: end;
    }
    .tools{ flex-direction: row; align-items: center; flex-wrap: wrap; }
    .btn{ width:auto; }
    .btn.secondary{ width:auto; }

    .grid{ grid-template-columns: 1fr 1fr; }
  }
</style>
</head>

<body>
<div class="wrap">

  <!-- Header / Controls -->
  <div class="card">
    <h1>Spanish Exercise — 3 Tenses (with examples)</h1>
    <div class="sub">
      Tap <b>▶ Speak</b> to hear the Spanish sentence. Auto-selects <b>Google Español de Estados Unidos</b> when available.
    </div>

    <div class="controls">
      <div class="controlRow">
        <label for="voiceSelect">Voice</label>
        <select id="voiceSelect"></select>
        <div class="hint" id="voiceHint"></div>
      </div>

      <div class="controlRow">
        <label for="rate">Speed</label>
        <input id="rate" type="range" min="0.6" max="1.2" step="0.05" value="0.95">
        <div class="hint" id="rateVal">0.95×</div>
      </div>

      <div class="controlRow">
        <button class="btn secondary" id="stopBtn" type="button">■ Stop</button>
      </div>
    </div>

    <div class="note">
      <b>Pretérito Perfecto</b> = “I have …” (recent / “today, this week”).<br>
      <b>Pretérito Indefinido</b> = “I …” (finished past time: “yesterday, last year”).
    </div>
  </div>

  <!-- COMER -->
  <div class="card">
    <h2>Comer — <span style="font-weight:600;color:#444;">to eat</span></h2>

    <div class="grid">
      <div class="item" data-spanish="Yo como pan todos los días.">
        <div class="sp">Yo como pan todos los días.</div>
        <div class="en"><b>English:</b> I eat bread every day.</div>
        <span class="tag">Presente</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>

      <div class="item" data-spanish="Hoy he comido una ensalada.">
        <div class="sp">Hoy he comido una ensalada.</div>
        <div class="en"><b>English:</b> Today I have eaten a salad.</div>
        <span class="tag">Pretérito Perfecto</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>

      <div class="item" data-spanish="Ayer comí pizza.">
        <div class="sp">Ayer comí pizza.</div>
        <div class="en"><b>English:</b> Yesterday I ate pizza.</div>
        <span class="tag">Pretérito Indefinido</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>
    </div>
  </div>

  <!-- VIVIR -->
  <div class="card">
    <h2>Vivir — <span style="font-weight:600;color:#444;">to live</span></h2>

    <div class="grid">
      <div class="item" data-spanish="Yo vivo en Los Ángeles.">
        <div class="sp">Yo vivo en Los Ángeles.</div>
        <div class="en"><b>English:</b> I live in Los Angeles.</div>
        <span class="tag">Presente</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>

      <div class="item" data-spanish="Este mes he vivido muy ocupado.">
        <div class="sp">Este mes he vivido muy ocupado.</div>
        <div class="en"><b>English:</b> This month I have lived very busy.</div>
        <div class="en"><i>More natural:</i> “Este mes <b>he estado</b> muy ocupado.” = I’ve been very busy this month.</div>
        <span class="tag">Pretérito Perfecto</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>

      <div class="item" data-spanish="El año pasado viví en otra ciudad.">
        <div class="sp">El año pasado viví en otra ciudad.</div>
        <div class="en"><b>English:</b> Last year I lived in another city.</div>
        <span class="tag">Pretérito Indefinido</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>
    </div>
  </div>

  <!-- HACER -->
  <div class="card">
    <h2>Hacer — <span style="font-weight:600;color:#444;">to do / to make</span></h2>

    <div class="grid">
      <div class="item" data-spanish="Yo hago ejercicio por la mañana.">
        <div class="sp">Yo hago ejercicio por la mañana.</div>
        <div class="en"><b>English:</b> I exercise in the morning.</div>
        <span class="tag">Presente</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>

      <div class="item" data-spanish="Hoy he hecho la cena.">
        <div class="sp">Hoy he hecho la cena.</div>
        <div class="en"><b>English:</b> Today I have made dinner.</div>
        <span class="tag">Pretérito Perfecto</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>

      <div class="item" data-spanish="Anoche hice una llamada importante.">
        <div class="sp">Anoche hice una llamada importante.</div>
        <div class="en"><b>English:</b> Last night I made an important call.</div>
        <span class="tag">Pretérito Indefinido</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>
    </div>
  </div>

  <!-- TENER -->
  <div class="card">
    <h2>Tener — <span style="font-weight:600;color:#444;">to have</span></h2>

    <div class="grid">
      <div class="item" data-spanish="Yo tengo dos hijos.">
        <div class="sp">Yo tengo dos hijos.</div>
        <div class="en"><b>English:</b> I have two kids.</div>
        <span class="tag">Presente</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>

      <div class="item" data-spanish="Esta semana he tenido mucho trabajo.">
        <div class="sp">Esta semana he tenido mucho trabajo.</div>
        <div class="en"><b>English:</b> This week I have had a lot of work.</div>
        <span class="tag">Pretérito Perfecto</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>

      <div class="item" data-spanish="Ayer tuve una reunión.">
        <div class="sp">Ayer tuve una reunión.</div>
        <div class="en"><b>English:</b> Yesterday I had a meeting.</div>
        <span class="tag">Pretérito Indefinido</span>
        <div class="tools"><button class="btn speak" type="button">▶ Speak</button></div>
      </div>
    </div>
  </div>

</div>

<script>
  // Auto-select voice preference: "Google Español de Estados Unidos" (if available)
  const PREFERRED_VOICE_PARTS = ["google", "español", "estados unidos"];

  const voiceSelect = document.getElementById("voiceSelect");
  const rate = document.getElementById("rate");
  const rateVal = document.getElementById("rateVal");
  const stopBtn = document.getElementById("stopBtn");
  const voiceHint = document.getElementById("voiceHint");

  function voiceNameMatchesPreferred(name) {
    const n = (name || "").toLowerCase();
    return PREFERRED_VOICE_PARTS.every(p => n.includes(p));
  }

  function loadVoicesAndAutoSelect() {
    const voices = window.speechSynthesis?.getVoices?.() || [];
    voiceSelect.innerHTML = "";

    voices.forEach(v => {
      const opt = document.createElement("option");
      opt.value = v.name;
      opt.textContent = `${v.name} (${v.lang})`;
      voiceSelect.appendChild(opt);
    });

    const preferred = voices.find(v => voiceNameMatchesPreferred(v.name));
    const esUS = voices.find(v => (v.lang || "").toLowerCase() === "es-us");
    const spanish = voices.find(v => (v.lang || "").toLowerCase().startsWith("es"));
    const chosen = preferred || esUS || spanish || voices[0] || null;

    if (chosen) {
      voiceSelect.value = chosen.name;
      voiceHint.textContent = preferred
        ? `Selected: ${chosen.name} (preferred)`
        : `Selected: ${chosen.name}`;
    } else {
      voiceHint.textContent = "No voices found in this browser environment.";
    }
  }

  function getSelectedVoice() {
    const voices = window.speechSynthesis?.getVoices?.() || [];
    return voices.find(v => v.name === voiceSelect.value) || null;
  }

  function speak(text) {
    if (!window.speechSynthesis) return;

    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.rate = parseFloat(rate.value);

    const chosen = getSelectedVoice();
    if (chosen) {
      u.voice = chosen;
      u.lang = chosen.lang || "es-US";
    } else {
      u.lang = "es-US";
    }

    window.speechSynthesis.speak(u);
  }

  rate.addEventListener("input", () => {
    rateVal.textContent = `${rate.value}×`;
  });

  stopBtn.addEventListener("click", () => window.speechSynthesis?.cancel?.());

  if (window.speechSynthesis) {
    loadVoicesAndAutoSelect();
    window.speechSynthesis.onvoiceschanged = loadVoicesAndAutoSelect;
  }

  // Hook up Speak buttons
  document.querySelectorAll("[data-spanish]").forEach(node => {
    const btn = node.querySelector(".speak");
    if (btn) btn.addEventListener("click", () => speak(node.dataset.spanish));
  });
</script>
</body>
</html>
